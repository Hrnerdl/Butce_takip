<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Finans Pro</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
</head>
<body>

<div class="app-container">
    
    <aside class="sidebar">
        <header>
            <h1><i class="fas fa-wallet"></i> Finans Pro</h1>
        </header>

        <div class="balance-card">
            <span id="current-status-title">Genel Durum</span>
            <h2 id="grand-total">0,00 ₺</h2>
            <small id="status-subtitle">Yükleniyor...</small>
        </div>

        <div class="nav-menu">
            <button class="nav-btn active" onclick="switchView('dashboard')">
                <i class="fas fa-chart-pie"></i> Özet Tablo
            </button>
            <button class="nav-btn" onclick="switchView('transactions')">
                <i class="fas fa-list-ul"></i> Hareketler
            </button>
            <button class="nav-btn" onclick="switchView('loans')">
                <i class="fas fa-university"></i> Kredi Planı
            </button>
        </div>

        <div class="action-buttons">
            <button class="btn btn-green" onclick="openModal('income')"><i class="fas fa-plus"></i> Gelir Ekle</button>
            <button class="btn btn-red" onclick="openModal('expense')"><i class="fas fa-minus"></i> Harcama Ekle</button>
        </div>

        <div class="mini-settings">
            <button onclick="openModal('pdf')" class="btn-text" style="color:#2c3e50; font-weight:bold;">
                <i class="fas fa-file-pdf"></i> PDF Rapor Al
            </button>
            <div style="display:flex; gap:10px;">
                <button onclick="exportData()" class="btn-text"><i class="fas fa-download"></i> Yedek</button>
                <button onclick="resetData()" class="btn-text text-danger"><i class="fas fa-trash"></i></button>
            </div>
        </div>
    </aside>

    <main class="main-content">
        
        <div id="view-dashboard" class="view-section active">
            <div class="table-header">
                <h2>Aylık Nakit Akışı</h2>
                <select id="year-filter" onchange="renderDashboard()">
                    <option value="2026">2026</option>
                    <option value="2027">2027</option>
                    <option value="2028">2028</option>
                </select>
            </div>
            
            <div class="table-scroll-container">
                <table class="dashboard-table">
                    <thead>
                        <tr>
                            <th>Dönem</th>
                            <th class="text-right">Gelir</th>
                            <th class="text-right">Kredi (1/3)</th>
                            <th class="text-right">Harcama</th>
                            <th class="text-right">Net</th>
                        </tr>
                    </thead>
                    <tbody id="dashboard-body"></tbody>
                </table>
            </div>
        </div>

        <div id="view-transactions" class="view-section">
            <div class="table-header">
                <h2>Hareket Geçmişi</h2>
                <div class="filter-tabs">
                    <button class="filter-tab active" onclick="filterTransactions('all')">Tümü</button>
                    <button class="filter-tab" onclick="filterTransactions('income')">Gelir</button>
                    <button class="filter-tab" onclick="filterTransactions('expense')">Gider</button>
                </div>
            </div>
            <div id="transaction-list" class="transaction-list"></div>
        </div>

        <div id="view-loans" class="view-section">
            <div class="table-header">
                <h2>Kredi Taksitleri</h2>
                <button class="btn-sm" onclick="openModal('loan')"><i class="fas fa-plus"></i> Ekle</button>
            </div>
            <div id="loan-list-full" class="loan-grid"></div>
        </div>

    </main>
</div>

<div id="modal-overlay" class="modal-overlay">
    <div class="modal-card">
        <div class="modal-header">
            <h3 id="modal-title">İşlem</h3>
            <button onclick="closeModal()" class="close-icon"><i class="fas fa-times"></i></button>
        </div>
        <div class="modal-body">
            <form id="active-form"></form>
        </div>
    </div>
</div>

<div id="pdf-template" style="display:none;">
    <div class="pdf-container">
        <div class="pdf-header">
            <h1>FİNANSAL DURUM RAPORU</h1>
            <p id="pdf-month-title">Dönem: --</p>
        </div>
        
        <div class="pdf-summary">
            <div class="p-box p-green">
                <span>TOPLAM GELİR</span>
                <h3 id="pdf-total-inc">0 ₺</h3>
            </div>
            <div class="p-box p-blue">
                <span>KREDİ (AYRILAN)</span>
                <h3 id="pdf-total-loan">0 ₺</h3>
            </div>
            <div class="p-box p-red">
                <span>HARCAMALAR</span>
                <h3 id="pdf-total-exp">0 ₺</h3>
            </div>
            <div class="p-box p-gray">
                <span>KALAN NET</span>
                <h3 id="pdf-net">0 ₺</h3>
            </div>
        </div>

        <div class="pdf-section">
            <h3><i class="fas fa-arrow-down"></i> Gelir Detayları</h3>
            <table class="pdf-table" id="pdf-table-inc">
                <thead><tr><th>Tarih</th><th>Açıklama</th><th class="tr">Tutar</th></tr></thead>
                <tbody></tbody>
            </table>
        </div>

        <div class="pdf-section">
            <h3><i class="fas fa-university"></i> Kredi Planı (Bu Aya Düşen)</h3>
            <table class="pdf-table" id="pdf-table-loan">
                <thead><tr><th>Kredi/Taksit</th><th>Vade Tarihi</th><th class="tr">Bu Ay Ayrılan</th></tr></thead>
                <tbody></tbody>
            </table>
        </div>

        <div class="pdf-section">
            <h3><i class="fas fa-arrow-up"></i> Harcama Detayları</h3>
            <table class="pdf-table" id="pdf-table-exp">
                <thead><tr><th>Tarih</th><th>Açıklama</th><th class="tr">Tutar</th></tr></thead>
                <tbody></tbody>
            </table>
        </div>

        <div class="pdf-footer">
            Bu rapor Finans Pro tarafından <span id="pdf-gen-date"></span> tarihinde oluşturulmuştur.
        </div>
    </div>
</div>

<script src="script.js"></script>
</body>
</html>
